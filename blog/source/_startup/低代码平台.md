## 总结

之前总是想着大而全，

## 最小化功能表

| 功能              | 描述                                                         |
| ----------------- | ------------------------------------------------------------ |
| 自动建表/新增记录 | 基于POST-Body生成jsonschema反推表结构并自动创建<br />需指定特定建表字段<br />如果有数据则<br />id作为非必须字段，使用类似创建表时的JSON |
| 引用              | 类似于qycloud数据源                                          |
| 删除记录          | 递归删除所有从属表                                           |
| 更新记录          | id作为必须字段，使用类似创建表时的JSON                       |
| 统一Query         | 支持SQL-Like查询语句，支持JOIN                               |
| 碎片整理          | 清理无用的空白字段<br />列举有数据但未被使用的字段           |
| 数据库支持        | MySQL、Postgresql、ClickHouse、SQLite3                       |
| 数据监听器        | 根据一张表更新另N张表（SQL结果+目标表.字段）                 |

https://github.com/xeipuuv/gojsonschema

自动生成表结构（space\_{SPACE_NAME}\_{TABLE_NAME}\_{FAT_COLUMN}）

SQL解析器

https://github.com/xwb1989/sqlparser

Go JS引擎

https://github.com/robertkrimen/otto

```go
vm.Set("sayHello", func(call otto.FunctionCall) otto.Value {
    fmt.Printf("Hello, %s.\n", call.Argument(0).String())
    return otto.Value{}
})
```



